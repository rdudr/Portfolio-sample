/* ============================================
   MOBILE FIXES - Comprehensive Mobile Optimization
   Fixes for header navigation and carousel sliding
   ============================================ */

/* ============================================
   Mobile Header Navigation Fix
   ============================================ */

@media (max-width: 768px) {
  /* Ensure header is properly positioned */
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: rgba(20, 20, 20, 0.98);
  }

  /* Header container - optimize for mobile */
  .header-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    gap: 0.5rem;
    flex-wrap: nowrap;
    min-height: 60px;
  }

  /* Hide search on mobile */
  .header-left {
    display: none;
  }

  /* Navigation container - scrollable */
  .header-center {
    flex: 1;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    margin: 0 -1rem;
    padding: 0 1rem;
  }

  .header-center::-webkit-scrollbar {
    display: none;
  }

  /* Navigation links - horizontal scroll */
  .main-nav {
    display: flex;
    flex-direction: row;
    gap: 0.5rem;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    scroll-behavior: smooth;
    padding: 0.25rem 0;
    white-space: nowrap;
  }

  .main-nav::-webkit-scrollbar {
    display: none;
  }

  /* Navigation links styling */
  .nav-link {
    flex-shrink: 0;
    font-size: 0.875rem;
    padding: 0.5rem 0.75rem;
    white-space: nowrap;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .nav-link.active {
    color: #e50914;
    font-weight: 600;
  }

  /* Right side - compact */
  .header-right {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .site-logo {
    font-size: 1.5rem;
  }

  .profile-icon {
    width: 36px;
    height: 36px;
  }

  /* Add body padding for fixed header */
  body {
    padding-top: 60px;
  }

  #app {
    padding-top: 0;
  }
}

/* Extra small mobile */
@media (max-width: 480px) {
  .header-container {
    padding: 0.5rem 0.75rem;
  }

  .nav-link {
    font-size: 0.8125rem;
    padding: 0.5rem 0.625rem;
  }

  .site-logo {
    font-size: 1.25rem;
  }

  .profile-icon {
    width: 32px;
    height: 32px;
  }
}

/* ============================================
   Mobile Carousel Sliding Fix
   ============================================ */

@media (max-width: 768px) {
  /* Row carousel container */
  .row-carousel {
    position: relative;
    width: 100%;
    overflow: hidden;
    margin-bottom: 2rem;
  }

  /* Carousel track - enable touch scrolling */
  .carousel-track {
    display: flex;
    gap: 0.75rem;
    padding: 0.5rem 1rem;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scrollbar-width: none;
    scroll-snap-type: x proximity;
    scroll-padding: 0 1rem;
    
    /* Prevent text selection during swipe */
    -webkit-user-select: none;
    user-select: none;
    
    /* Optimize touch performance */
    touch-action: pan-x;
    overscroll-behavior-x: contain;
  }

  .carousel-track::-webkit-scrollbar {
    display: none;
  }

  /* Content cards - proper sizing for mobile */
  .carousel-track .content-card {
    flex: 0 0 auto;
    width: 75vw;
    max-width: 280px;
    min-width: 240px;
    scroll-snap-align: start;
    scroll-snap-stop: normal;
  }

  /* Hide carousel arrows on mobile */
  .carousel-arrow,
  .carousel-arrow-left,
  .carousel-arrow-right {
    display: none !important;
  }

  /* Disable hover effects on mobile */
  .content-card:hover {
    transform: none;
  }

  /* Add tap feedback */
  .content-card:active {
    transform: scale(0.98);
    transition: transform 100ms ease;
  }
}

/* ============================================
   Content Row Spacing
   ============================================ */

@media (max-width: 768px) {
  .content-row {
    margin-bottom: 2rem;
    padding: 0;
  }

  .row-title {
    font-size: 1.25rem;
    padding: 0 1rem;
    margin-bottom: 0.75rem;
  }

  .row-header {
    padding: 0 1rem;
    margin-bottom: 0.75rem;
  }
}

/* ============================================
   Browse Hub Mobile Optimization
   ============================================ */

@media (max-width: 768px) {
  .browse-hub {
    padding-top: 0;
  }

  .hero-section {
    min-height: 400px;
    margin-bottom: 2rem;
  }

  .content-rows-container {
    padding: 0;
  }
}

/* ============================================
   Detail Page Mobile Fix
   ============================================ */

@media (max-width: 768px) {
  .detail-page {
    padding-top: 60px;
  }

  .detail-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    height: 60px;
    background: rgba(20, 20, 20, 0.98);
  }

  .back-button {
    min-height: 44px;
    min-width: 44px;
  }
}

/* ============================================
   Touch Target Optimization
   ============================================ */

@media (max-width: 768px) {
  /* Ensure all interactive elements meet 44px minimum */
  button,
  .cta-button,
  .nav-link,
  .content-card,
  .back-button {
    min-height: 44px;
    min-width: 44px;
  }

  /* Carousel dots */
  .carousel-dot {
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .carousel-dot::before {
    content: '';
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
  }

  .carousel-dot.active::before {
    background: #e50914;
    width: 12px;
    height: 12px;
  }
}

/* ============================================
   Prevent Horizontal Overflow
   ============================================ */

@media (max-width: 768px) {
  body {
    overflow-x: hidden;
  }

  #app {
    overflow-x: hidden;
    width: 100%;
  }

  .browse-hub,
  .detail-page {
    overflow-x: hidden;
    width: 100%;
  }
}

/* ============================================
   Safe Area Insets (Notched Devices)
   ============================================ */

@supports (padding: max(0px)) {
  @media (max-width: 768px) {
    .site-header {
      padding-left: max(1rem, env(safe-area-inset-left));
      padding-right: max(1rem, env(safe-area-inset-right));
      padding-top: max(0.75rem, env(safe-area-inset-top));
    }

    body {
      padding-top: max(60px, calc(60px + env(safe-area-inset-top)));
    }

    .carousel-track {
      padding-left: max(1rem, env(safe-area-inset-left));
      padding-right: max(1rem, env(safe-area-inset-right));
    }
  }
}

/* ============================================
   Performance Optimizations
   ============================================ */

@media (max-width: 768px) {
  /* Reduce animation complexity */
  * {
    animation-duration: 0.2s !important;
  }

  /* Optimize transforms */
  .content-card,
  .carousel-track {
    will-change: transform;
  }

  /* Simplify backdrop blur on mobile */
  .site-header {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* ============================================
   Landscape Orientation
   ============================================ */

@media (max-width: 768px) and (orientation: landscape) {
  .hero-section {
    min-height: 300px;
  }

  .header-container {
    padding: 0.5rem 1rem;
    min-height: 50px;
  }

  body {
    padding-top: 50px;
  }
}

/* ============================================
   iOS Specific Fixes
   ============================================ */

@supports (-webkit-touch-callout: none) {
  @media (max-width: 768px) {
    /* Prevent iOS zoom on input focus */
    input[type="text"],
    input[type="search"],
    textarea {
      font-size: 16px;
    }

    /* Fix iOS scroll momentum */
    .carousel-track,
    .main-nav,
    .header-center {
      -webkit-overflow-scrolling: touch;
    }

    /* Prevent iOS rubber band effect */
    body {
      overscroll-behavior-y: none;
    }
  }
}

/* ============================================
   Android Specific Fixes
   ============================================ */

@media (max-width: 768px) {
  /* Improve Android scroll performance */
  .carousel-track {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}
